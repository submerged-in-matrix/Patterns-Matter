<!DOCTYPE html>
<html>
<head>
    <title>Music & Guitar Clips | Patterns Matter</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <style>
        .section {
            margin-bottom: 2.3em;
            padding: 1em 1.3em;
            border-radius: 12px;
            background: #2a2e33;
            box-shadow: 0 1px 6px #2224;
            color: #f1f1f1;
        }
        iframe, video, audio {
            margin-top: 0.7em;
            width: 380px;
            border: none;
        }
        .download-link {
            color: #6af;
            font-weight: bold;
        }
        .admin-link a {
            color: #fff;
            text-decoration: none;
            margin-left: 1em;
            font-weight: bold;
        }
        .admin-link a:hover { text-decoration: underline; }
    </style>
</head>
<body>
<div class="container">
    <!-- Admin Login/Logout -->
    <div class="admin-link" style="text-align: right; margin-bottom: 1em;">
        {% if session.admin %}
            <a href="{{ url_for('logout') }}">Logout</a>
        {% else %}
            <a href="{{ url_for('login') }}">Admin Login</a>
        {% endif %}
    </div>

    <h1>Music & Guitar Clips</h1>

    {% if admin %}
        <p style="margin-top: 1em;">
            <a href="{{ url_for('add_drive_clip') }}" style="color: #6af; font-weight:bold;">
                âž• Add Drive Clip via Form
            </a>
        </p>
    {% endif %}

    {% if clips %}
        {% for preview, download, title, description in clips %}
            <div class="section">
                <b>{{ title }}</b><br>
                <small>{{ description }}</small><br>

                {% if 'drive.google.com' in preview %}
                    <iframe src="{{ preview }}" allow="autoplay" allowfullscreen></iframe>
                {% elif preview.endswith('.mp4') %}
                    <video controls>
                        <source src="{{ preview }}">
                        Your browser does not support the video tag.
                    </video>
                {% elif preview.endswith('.mp3') or preview.endswith('.wav') %}
                    <audio controls>
                        <source src="{{ preview }}">
                        Your browser does not support the audio element.
                    </audio>
                {% else %}
                    <a href="{{ preview }}" target="_blank">{{ preview }}</a>
                {% endif %}

                {% if download %}
                    <br><a class="download-link" href="{{ download }}" target="_blank">Download</a>
                {% endif %}
            </div>
        {% endfor %}
    {% else %}
        <p>No music clips found.</p>
    {% endif %}

    <div style="margin-top: 2em;">
        <a href="{{ url_for('public_home') }}">Home</a> |
        <a href="{{ url_for('materials_portal') }}">Materials Database</a>
    </div>
</div>
</body>
</html>